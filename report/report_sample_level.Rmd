---
title: 'Analysis Report'
output:
  prettydoc::html_pretty:
    theme: architect
    mathjax: null
    css: "style.css"
keep_md: true
always_allow_html: true
self_contained: true

params:
  project_path: dummy
  geneAnnotation_path: dummy
  child_docs: !r c("/work/ci/vurals/mutation_report/Goliath/load_data.Rmd") #
  sample_id: dummy
---


```{css, echo=FALSE}
@media screen and (max-width: 600px) {
  img.img_class {
    display: none;
  }
}
```


```{r, echo=FALSE}
htmltools::img(src = "MSKCC-logo.png",
               alt = 'logo',
               class = 'img_class',
               style = 'position:absolute; top:-120px; left:0; padding:3px; max-height: 70px', 
               # width = "30%",
               heigth = "auto"
               )
```

```{r set_defaults, echo=FALSE, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_chunk$set(comment = NA)
```

```{r compile_child, results='asis', include=FALSE}
# load and compile each child doc
for(child_doc in params$child_docs){
    cat(knitr::knit_child(child_doc, quiet = TRUE))
    cat('\n')
}
```
```{r report_info, echo=FALSE}
report_id <- "Report uuid comes here"

report_info_table <- data.frame(c("Report uuid:"),c(report_id))

kable(report_info_table, col.names = NULL) %>% 
  kable_styling( full_width = T, position = "left")%>% 
  column_spec(1, bold = T)
```

```{r data_clinical, echo=FALSE}
clinical_header_row_css<- "background-color: #8b8da3; color: #fff;"

#"html", col.names = NULL, align = 'l'
kable(tbl01)
# kable(tbl01, col.names = NULL) %>% kable_styling(htmltable_class = "data_clinical_table_style", full_width = T, position = "left")%>% add_header_above(c( "Data clinical:" = 4), align= "l",extra_css= clinical_header_row_css )
```


```{r summary, echo=FALSE}
general_summary <- "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
msi_summary <- "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
tmb_summary <- "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
cumments_summary <- "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
summary_table <- data.frame(c("Summary:","MSI Status:", "Tumor Mutations Burden:", "Comments:"),c(general_summary,msi_summary,tmb_summary,cumments_summary))


kable(summary_table, col.names = NULL) %>% kable_styling(htmltable_class = "summary_table_style", full_width = T, position = "left")%>%
  column_spec(1, bold = T)



```


```{r mutations, echo=FALSE}
row_top_css <- "background-color: #63a0e1; color: #fff;"
row_middle_css <- "background-color: #87CEFA; color: #fff;"
n <- rbind(mafTbl,cnvTbl)

# , "html",  align = 'l'
kable(n) %>% kable_styling(htmltable_class = "table_class", full_width = T, position = "left")%>%
  add_header_above(c( "Somatic alterations detected in this sample:" = 5), align= "l",extra_css= row_top_css )%>%
  pack_rows("Mutations", 1, nrow(mafTbl), label_row_css = row_middle_css)%>%
  pack_rows("Copy Number Alterations", nrow(mafTbl)+1, nrow(mafTbl)+nrow(cnvTbl), label_row_css = row_middle_css)
```